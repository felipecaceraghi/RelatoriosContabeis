{
  "id": "e64dab2e-2793-445c-8aa9-b89111fe829a",
  "type": "balancete",
  "payload": {
    "codiEmp": 2396,
    "dataInicial": "2025-07-01",
    "dataFinal": "2025-07-31",
    "ingles": false
  },
  "status": "complete",
  "progress": 100,
  "result": {
    "raw": "============================================================\r\nðŸ¢ SISTEMA DE GERAÃ‡ÃƒO DE BALANCETE CONTÃBIL\r\n============================================================\r\n\r\nðŸ“‹ PARÃ‚METROS CONFIGURADOS:\r\n   â€¢ Empresa: 2396\r\n   â€¢ PerÃ­odo: 2025-07-01 a 2025-07-31\r\n   â€¢ Idioma: PortuguÃªs\r\n   â€¢ Assinatura de Arquivo: 20250828_110751\r\n\r\nðŸ” Buscando parÃ¢metros de configuraÃ§Ã£o...\r\n\r\n--- Iniciando busca de parÃ¢metros para Empresa: 2396 ---\r\nPasso 1: Buscando filiais para consolidaÃ§Ã£o...\r\n  > Radical do CNPJ encontrado: 22359605\r\n  > Filiais encontradas para consolidaÃ§Ã£o: [2397]\r\n  > Lista final de filiais para a consulta: [2396, 2397]\r\nPasso 2: Verificando ordenaÃ§Ã£o especial...\r\n  > Regra de ordenaÃ§Ã£o encontrada. Buscando detalhes...\r\n  > ClassificaÃ§Ãµes para ordenaÃ§Ã£o especial: ['211011', '112001']\r\n\r\n--- Coleta de parÃ¢metros finalizada com sucesso! ---\r\n\r\nâš¡ Gerando consulta SQL otimizada...\r\n   âœ… Filtros rigorosos serÃ£o aplicados na camada de negÃ³cios (Python)\r\n   ðŸ“Š Consulta SQL traz TODOS os dados - filtros aplicados depois\r\n   ðŸ‡§ðŸ‡· Modo portuguÃªs - usando nomes originais das contas\r\n\r\nðŸ”„ Executando consulta Ãºnica consolidada...\r\nðŸ“Š Buscando dados do relatÃ³rio...\r\n   âœ… 1162 linhas brutas encontradas em 4.60s\r\n   ðŸ“Š ComposiÃ§Ã£o inicial: 243 sintÃ©ticas + 919 analÃ­ticas\r\nðŸ” Aplicando filtros de regras de negÃ³cio...\r\n   ðŸ”§ Aplicando filtros bÃ¡sicos...\r\n      âŒ 6 contas de PrejuÃ­zo (238) removidas\r\n      âœ… Contas 230 (Lucro) e 232 preservadas - apenas 238 (PrejuÃ­zo) removida\r\n      âŒ 817 contas analÃ­ticas completamente zeradas removidas\r\n   ðŸ”§ Aplicando filtros rigorosos...\r\n      âŒ 4 contas analÃ­ticas com saldos zerados removidas\r\n   ðŸ“Š Resultado: 1162 â†’ 335 linhas (241 sintÃ©ticas + 94 analÃ­ticas)\r\n   âœ… 827 linhas removidas pelos filtros\r\nðŸ“‹ Buscando dados de cabeÃ§alho e rodapÃ©...\r\nðŸ§® Calculando totalizaÃ§Ã£o hierÃ¡rquica...\r\n   Calculando totalizaÃ§Ã£o hierÃ¡rquica (versÃ£o otimizada)...\r\n   DEBUG: Total de contas sintÃ©ticas: 241\r\n   DEBUG: Total de contas analÃ­ticas: 94\r\n   DEBUG: '11' -> 12 descendentes\r\n   DEBUG: '11' TOTAL = 533012.63\r\n   DEBUG: '12' -> 6 descendentes\r\n   DEBUG: '12' TOTAL = 63672.11\r\n   DEBUG: '21' -> 27 descendentes\r\n   DEBUG: '21' TOTAL = -566070.38\r\n   DEBUG: '22' -> 4 descendentes\r\n   DEBUG: '22' TOTAL = -226743.49\r\n   âœ… Hierarquia calculada em 0.06s\r\nðŸ—‘ï¸ Filtrando contas sintÃ©ticas zeradas sem descendentes...\r\n   âœ… 168 contas sintÃ©ticas zeradas removidas.\r\n   âœ… TransaÃ§Ã£o confirmada (commit).\r\n\r\nðŸ“„ Gerando relatÃ³rios de saÃ­da...\r\n   Gerando PDF com 167 linhas...\r\n   Gerando XLSX 'Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx'...\r\n   Iniciando desenho da seÃ§Ã£o de resumo...\r\n\r\nPDF 'Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.pdf' gerado com sucesso!\r\n   XLSX 'Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx' gerado com sucesso!\r\n\r\nðŸŽ‰ === PROCESSO CONCLUÃDO COM SUCESSO ===\r\nâ±ï¸  Tempo total: 4.82 segundos\r\nðŸ“Š Consulta SQL: 4.60s\r\nðŸ” Filtros de negÃ³cio: 0.04s\r\nðŸ§® Hierarquia: 0.06s\r\nðŸ“„ GeraÃ§Ã£o de arquivos: 0.10s\r\nðŸ“ Arquivos gerados:\r\n   â€¢ Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.pdf\r\n   â€¢ Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx\r\n\r\nðŸ“ Renomeando arquivos...\r\nDebug: Iniciando renomeamento de Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.pdf\r\nDebug: Caminho completo: Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.pdf\r\nDebug: Arquivo existe: True\r\nDebug: ParÃ¢metros - codi_emp: 2396, data_inicial: 2025-07-01, data_final: 2025-07-31, idioma_ingles: False\r\nDebug: Tipo de relatÃ³rio identificado: balancete\r\nDebug: Nome da empresa: DC VECCHI\r\nDebug: PerÃ­odo 2025-07-01 a 2025-07-31, is_acumulado = False\r\nDebug: Novo nome gerado: DC VECCHI - Balancete Mensal 07.2025 - Emitido em 28.08.2025.pdf\r\nDebug: Novo caminho: DC VECCHI - Balancete Mensal 07.2025 - Emitido em 28.08.2025.pdf\r\nErro ao renomear arquivo Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.pdf: [WinError 183] NÃ£o Ã© possÃ­vel criar um arquivo jÃ¡ existente: 'Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.pdf' -> 'DC VECCHI - Balancete Mensal 07.2025 - Emitido em 28.08.2025.pdf'\r\nDebug: Iniciando renomeamento de Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx\r\nDebug: Caminho completo: Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx\r\nDebug: Arquivo existe: True\r\nDebug: ParÃ¢metros - codi_emp: 2396, data_inicial: 2025-07-01, data_final: 2025-07-31, idioma_ingles: False\r\nDebug: Tipo de relatÃ³rio identificado: balancete\r\nDebug: Nome da empresa: DC VECCHI\r\nDebug: PerÃ­odo 2025-07-01 a 2025-07-31, is_acumulado = False\r\nDebug: Novo nome gerado: DC VECCHI - Balancete Mensal 07.2025 - Emitido em 28.08.2025.xlsx\r\nDebug: Novo caminho: DC VECCHI - Balancete Mensal 07.2025 - Emitido em 28.08.2025.xlsx\r\nErro ao renomear arquivo Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx: [WinError 183] NÃ£o Ã© possÃ­vel criar um arquivo jÃ¡ existente: 'Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx' -> 'DC VECCHI - Balancete Mensal 07.2025 - Emitido em 28.08.2025.xlsx'\r\nðŸ”Œ Fechando a conexÃ£o com o banco de dados.\r\n{\"pdf\": \"Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.pdf\", \"xlsx\": \"Balancete_2396_2025-07-01_a_2025-07-31_20250828_110751.xlsx\"}\r\n",
    "code": 0
  },
  "error": null,
  "createdAt": 1756390071104,
  "startedAt": 1756390071105
}